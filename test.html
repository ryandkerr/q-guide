<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <script src="js/d3.js"></script>
  <script src="js/d3.layout.cloud.js"></script>
</head>

<body>
<script>
var TEST;

d3.json("data/all_courses_all.json", function(error, data) {
  TEST = data;
  var COURSE_NAME = "CHNSE Ba: Elementary Modern Chinese"

  var selected_course;
  TEST.forEach(function(d) {
    if(d.course == COURSE_NAME) {
      selected_course = d;
    }
  })

  // debugger;

  var max_size = 0;
  selected_course.reviews.forEach(function(d) {
    if(d.size > max_size) {
      max_size = d.size + .01
    }
  })

  debugger;

  wordScale=d3.scale.linear().domain([0,max_size]).range([10,160]);
  var fill = d3.scale.category20();
  svg_size = [500, 500]

  d3.layout.cloud()
     .size(svg_size)
     .words(selected_course.reviews)
     .fontSize(function(d) { return wordScale(d.size); })
     .on("end", draw)
     .start();

     function draw(words) {
       d3.select("body").append("svg")
           .attr("width", svg_size[0])
           .attr("height", svg_size[1])
         .append("g")
           .attr("transform", "translate(" + svg_size[0] / 2 + "," + svg_size[1] / 2 + ")")
         .selectAll("text")
           .data(words)
         .enter().append("text")
           .style("font-size", function(d) { return d.size + "px"; })
           .style("font-family", "Impact")
           .style("fill", function(d, i) { return fill(i); })
           .attr("text-anchor", "middle")
           .attr("transform", function(d) {
             return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
           })
           .text(function(d) { return d.text; });
     }
})






</script>
</body>
</html>

